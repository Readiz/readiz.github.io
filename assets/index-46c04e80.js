import{r as x,R as ft,j as b,a as j,F as Q}from"./ssg-client-ddf41fd2.js";var ye="Invariant failed";function X(n,t){if(!n)throw new Error(ye)}function ve(n,t){var e=x.useRef(null),s=x.useRef(null);s.current=t;var i=x.useRef(null);x.useEffect(function(){r()});var r=x.useCallback(function(){var o=i.current,l=s.current,f=o||(l?l instanceof Element?l:l.current:null);e.current&&e.current.element===f&&e.current.subscriber===n||(e.current&&e.current.cleanup&&e.current.cleanup(),e.current={element:f,subscriber:n,cleanup:f?n(f):void 0})},[n]);return x.useEffect(function(){return function(){e.current&&e.current.cleanup&&(e.current.cleanup(),e.current=null)}},[]),x.useCallback(function(o){i.current=o,r()},[r])}function Dt(n,t,e){return n[t]?n[t][0]?n[t][0][e]:n[t][e]:t==="contentBoxSize"?n.contentRect[e==="inlineSize"?"width":"height"]:void 0}function _e(n){n===void 0&&(n={});var t=n.onResize,e=x.useRef(void 0);e.current=t;var s=n.round||Math.round,i=x.useRef(),r=x.useState({width:void 0,height:void 0}),o=r[0],l=r[1],f=x.useRef(!1);x.useEffect(function(){return f.current=!1,function(){f.current=!0}},[]);var h=x.useRef({width:void 0,height:void 0}),u=ve(x.useCallback(function(m){return(!i.current||i.current.box!==n.box||i.current.round!==s)&&(i.current={box:n.box,round:s,instance:new ResizeObserver(function(g){var M=g[0],_=n.box==="border-box"?"borderBoxSize":n.box==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",d=Dt(M,_,"inlineSize"),y=Dt(M,_,"blockSize"),E=d?s(d):void 0,S=y?s(y):void 0;if(h.current.width!==E||h.current.height!==S){var C={width:E,height:S};h.current.width=E,h.current.height=S,e.current?e.current(C):f.current||l(C)}})}),i.current.instance.observe(m,{box:n.box}),function(){i.current&&i.current.instance.unobserve(m)}},[n.box,s]),n.ref);return x.useMemo(function(){return{ref:u,width:o.width,height:o.height}},[u,o.width,o.height])}function be(n,t,e){return Math.max(t,Math.min(n,e))}const A={toVector(n,t){return n===void 0&&(n=t),Array.isArray(n)?n:[n,n]},add(n,t){return[n[0]+t[0],n[1]+t[1]]},sub(n,t){return[n[0]-t[0],n[1]-t[1]]},addTo(n,t){n[0]+=t[0],n[1]+=t[1]},subTo(n,t){n[0]-=t[0],n[1]-=t[1]}};function At(n,t,e){return t===0||Math.abs(t)===1/0?Math.pow(n,e*5):n*t*e/(t+e*n)}function Pt(n,t,e,s=.15){return s===0?be(n,t,e):n<t?-At(t-n,e-t,s)+t:n>e?+At(n-e,e-t,s)+e:n}function xe(n,[t,e],[s,i]){const[[r,o],[l,f]]=n;return[Pt(t,r,o,s),Pt(e,l,f,i)]}function Me(n,t){if(typeof n!="object"||n===null)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var s=e.call(n,t||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(n)}function we(n){var t=Me(n,"string");return typeof t=="symbol"?t:String(t)}function L(n,t,e){return t=we(t),t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Ot(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,s)}return e}function O(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Ot(Object(e),!0).forEach(function(s){L(n,s,e[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ot(Object(e)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(e,s))})}return n}const qt={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Rt(n){return n?n[0].toUpperCase()+n.slice(1):""}const Ee=["enter","leave"];function Te(n=!1,t){return n&&!Ee.includes(t)}function Se(n,t="",e=!1){const s=qt[n],i=s&&s[t]||t;return"on"+Rt(n)+Rt(i)+(Te(e,i)?"Capture":"")}const ke=["gotpointercapture","lostpointercapture"];function Ce(n){let t=n.substring(2).toLowerCase();const e=!!~t.indexOf("passive");e&&(t=t.replace("passive",""));const s=ke.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(s);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:e}}function Ie(n,t=""){const e=qt[n],s=e&&e[t]||t;return n+s}function ut(n){return"touches"in n}function Ft(n){return ut(n)?"touch":"pointerType"in n?n.pointerType:"mouse"}function De(n){return Array.from(n.touches).filter(t=>{var e,s;return t.target===n.currentTarget||((e=n.currentTarget)===null||e===void 0||(s=e.contains)===null||s===void 0?void 0:s.call(e,t.target))})}function Ae(n){return n.type==="touchend"||n.type==="touchcancel"?n.changedTouches:n.targetTouches}function Jt(n){return ut(n)?Ae(n)[0]:n}function dt(n,t){try{const e=t.clientX-n.clientX,s=t.clientY-n.clientY,i=(t.clientX+n.clientX)/2,r=(t.clientY+n.clientY)/2,o=Math.hypot(e,s);return{angle:-(Math.atan2(e,s)*180)/Math.PI,distance:o,origin:[i,r]}}catch{}return null}function Pe(n){return De(n).map(t=>t.identifier)}function Lt(n,t){const[e,s]=Array.from(n.touches).filter(i=>t.includes(i.identifier));return dt(e,s)}function ht(n){const t=Jt(n);return ut(n)?t.identifier:t.pointerId}function tt(n){const t=Jt(n);return[t.clientX,t.clientY]}const $t=40,Nt=800;function Zt(n){let{deltaX:t,deltaY:e,deltaMode:s}=n;return s===1?(t*=$t,e*=$t):s===2&&(t*=Nt,e*=Nt),[t,e]}function Oe(n){var t,e;const{scrollX:s,scrollY:i,scrollLeft:r,scrollTop:o}=n.currentTarget;return[(t=s??r)!==null&&t!==void 0?t:0,(e=i??o)!==null&&e!==void 0?e:0]}function Re(n){const t={};if("buttons"in n&&(t.buttons=n.buttons),"shiftKey"in n){const{shiftKey:e,altKey:s,metaKey:i,ctrlKey:r}=n;Object.assign(t,{shiftKey:e,altKey:s,metaKey:i,ctrlKey:r})}return t}function at(n,...t){return typeof n=="function"?n(...t):n}function Le(){}function $e(...n){return n.length===0?Le:n.length===1?n[0]:function(){let t;for(const e of n)t=e.apply(this,arguments)||t;return t}}function Kt(n,t){return Object.assign({},t,n||{})}const Ne=32;class Qt{constructor(t,e,s){this.ctrl=t,this.args=e,this.key=s,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:e,ingKey:s,args:i}=this;e[s]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const e=this.state,s=this.config;e._active||(this.reset(),this.computeInitial(),e._active=!0,e.target=t.target,e.currentTarget=t.currentTarget,e.lastOffset=s.from?at(s.from,e):e.offset,e.offset=e.lastOffset,e.startTime=e.timeStamp=t.timeStamp)}computeValues(t){const e=this.state;e._values=t,e.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:e,config:s,shared:i}=this;e.args=this.args;let r=0;if(t&&(e.event=t,s.preventDefault&&t.cancelable&&e.event.preventDefault(),e.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,Re(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,r=t.timeStamp-e.timeStamp,e.timeStamp=t.timeStamp,e.elapsedTime=e.timeStamp-e.startTime),e._active){const c=e._delta.map(Math.abs);A.addTo(e._distance,c)}this.axisIntent&&this.axisIntent(t);const[o,l]=e._movement,[f,h]=s.threshold,{_step:u,values:m}=e;if(s.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(o)>=f&&m[0]),u[1]===!1&&(u[1]=Math.abs(l)>=h&&m[1])):(u[0]===!1&&(u[0]=Math.abs(o)>=f&&Math.sign(o)*f),u[1]===!1&&(u[1]=Math.abs(l)>=h&&Math.sign(l)*h)),e.intentional=u[0]!==!1||u[1]!==!1,!e.intentional)return;const g=[0,0];if(s.hasCustomTransform){const[c,p]=m;g[0]=u[0]!==!1?c-u[0]:0,g[1]=u[1]!==!1?p-u[1]:0}else g[0]=u[0]!==!1?o-u[0]:0,g[1]=u[1]!==!1?l-u[1]:0;this.restrictToAxis&&!e._blocked&&this.restrictToAxis(g);const M=e.offset,_=e._active&&!e._blocked||e.active;_&&(e.first=e._active&&!e.active,e.last=!e._active&&e.active,e.active=i[this.ingKey]=e._active,t&&(e.first&&("bounds"in s&&(e._bounds=at(s.bounds,e)),this.setup&&this.setup()),e.movement=g,this.computeOffset()));const[d,y]=e.offset,[[E,S],[C,T]]=e._bounds;e.overflow=[d<E?-1:d>S?1:0,y<C?-1:y>T?1:0],e._movementBound[0]=e.overflow[0]?e._movementBound[0]===!1?e._movement[0]:e._movementBound[0]:!1,e._movementBound[1]=e.overflow[1]?e._movementBound[1]===!1?e._movement[1]:e._movementBound[1]:!1;const a=e._active?s.rubberband||[0,0]:[0,0];if(e.offset=xe(e._bounds,e.offset,a),e.delta=A.sub(e.offset,M),this.computeMovement(),_&&(!e.last||r>Ne)){e.delta=A.sub(e.offset,M);const c=e.delta.map(Math.abs);A.addTo(e.distance,c),e.direction=e.delta.map(Math.sign),e._direction=e._delta.map(Math.sign),!e.first&&r>0&&(e.velocity=[c[0]/r,c[1]/r],e.timeDelta=r)}}emit(){const t=this.state,e=this.shared,s=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!s.triggerAllEvents)return;const i=this.handler(O(O(O({},e),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ke([n,t],e){const s=Math.abs(n),i=Math.abs(t);if(s>i&&s>e)return"x";if(i>s&&i>e)return"y"}class nt extends Qt{constructor(...t){super(...t),L(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=A.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=A.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const e=this.state,s=this.config;if(!e.axis&&t){const i=typeof s.axisThreshold=="object"?s.axisThreshold[Ft(t)]:s.axisThreshold;e.axis=Ke(e._movement,i)}e._blocked=(s.lockDirection||!!s.axis)&&!e.axis||!!s.axis&&s.axis!==e.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Ve=n=>n,Vt=.15,te={enabled(n=!0){return n},eventOptions(n,t,e){return O(O({},e.shared.eventOptions),n)},preventDefault(n=!1){return n},triggerAllEvents(n=!1){return n},rubberband(n=0){switch(n){case!0:return[Vt,Vt];case!1:return[0,0];default:return A.toVector(n)}},from(n){if(typeof n=="function")return n;if(n!=null)return A.toVector(n)},transform(n,t,e){const s=n||e.shared.transform;return this.hasCustomTransform=!!s,s||Ve},threshold(n){return A.toVector(n,0)}},Ye=0,z=O(O({},te),{},{axis(n,t,{axis:e}){if(this.lockDirection=e==="lock",!this.lockDirection)return e},axisThreshold(n=Ye){return n},bounds(n={}){if(typeof n=="function")return r=>z.bounds(n(r));if("current"in n)return()=>n.current;if(typeof HTMLElement=="function"&&n instanceof HTMLElement)return n;const{left:t=-1/0,right:e=1/0,top:s=-1/0,bottom:i=1/0}=n;return[[t,e],[s,i]]}}),Yt={ArrowRight:(n,t=1)=>[n*t,0],ArrowLeft:(n,t=1)=>[-1*n*t,0],ArrowUp:(n,t=1)=>[0,-1*n*t],ArrowDown:(n,t=1)=>[0,n*t]};class je extends nt{constructor(...t){super(...t),L(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const e=t._bounds.getBoundingClientRect(),s=t.currentTarget.getBoundingClientRect(),i={left:e.left-s.left+t.offset[0],right:e.right-s.right+t.offset[0],top:e.top-s.top+t.offset[1],bottom:e.bottom-s.bottom+t.offset[1]};t._bounds=z.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const e=this.config,s=this.state;if(t.buttons!=null&&(Array.isArray(e.pointerButtons)?!e.pointerButtons.includes(t.buttons):e.pointerButtons!==-1&&e.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);e.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&s._pointerActive)&&(this.start(t),this.setupPointer(t),s._pointerId=ht(t),s._pointerActive=!0,this.computeValues(tt(t)),this.computeInitial(),e.preventScrollAxis&&Ft(t)!=="mouse"?(s._active=!1,this.setupScrollPrevention(t)):e.delay>0?(this.setupDelayTrigger(t),e.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const e=this.state;e._active=!0,e._preventScroll=!0,e._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const e=this.state,s=this.config;if(!e._pointerActive)return;const i=ht(t);if(e._pointerId!==void 0&&i!==e._pointerId)return;const r=tt(t);if(document.pointerLockElement===t.target?e._delta=[t.movementX,t.movementY]:(e._delta=A.sub(r,e._values),this.computeValues(r)),A.addTo(e._movement,e._delta),this.compute(t),e._delayed&&e.intentional){this.timeoutStore.remove("dragDelay"),e.active=!1,this.startPointerDrag(t);return}if(s.preventScrollAxis&&!e._preventScroll)if(e.axis)if(e.axis===s.preventScrollAxis||s.preventScrollAxis==="xy"){e._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const e=this.state,s=this.config;if(!e._active||!e._pointerActive)return;const i=ht(t);if(e._pointerId!==void 0&&i!==e._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[r,o]=e._distance;if(e.tap=r<=s.tapsThreshold&&o<=s.tapsThreshold,e.tap&&s.filterTaps)e._force=!0;else{const[l,f]=e._delta,[h,u]=e._movement,[m,g]=s.swipe.velocity,[M,_]=s.swipe.distance,d=s.swipe.duration;if(e.elapsedTime<d){const y=Math.abs(l/e.timeDelta),E=Math.abs(f/e.timeDelta);y>m&&Math.abs(h)>M&&(e.swipe[0]=Math.sign(l)),E>g&&Math.abs(u)>_&&(e.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const e=this.config,s=e.device;e.pointerLock&&t.currentTarget.requestPointerLock(),e.pointerCapture||(this.eventStore.add(this.sharedConfig.window,s,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,s,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,Ue(t);const e=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",e),this.eventStore.add(this.sharedConfig.window,"touch","cancel",e),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const e=Yt[t.key];if(e){const s=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),s._delta=e(this.config.keyboardDisplacement,i),s._keyboardActive=!0,A.addTo(s._movement,s._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Yt&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const e=this.config.device;t(e,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(e,"change",this.pointerMove.bind(this)),t(e,"end",this.pointerUp.bind(this)),t(e,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Ue(n){"persist"in n&&typeof n.persist=="function"&&n.persist()}const st=typeof window<"u"&&window.document&&window.document.createElement;function Be(){return st&&"ontouchstart"in window}function jt(){return Be()||st&&window.navigator.maxTouchPoints>1}function Xe(){return st&&"onpointerdown"in window}function He(){return st&&"exitPointerLock"in window.document}function We(){try{return"constructor"in GestureEvent}catch{return!1}}const U={isBrowser:st,gesture:We(),touch:jt(),touchscreen:jt(),pointer:Xe(),pointerLock:He()},Ge=250,ze=180,qe=.5,Fe=50,Je=250,Ze=10,Ut={mouse:0,touch:0,pen:8},Qe=O(O({},z),{},{device(n,t,{pointer:{touch:e=!1,lock:s=!1,mouse:i=!1}={}}){return this.pointerLock=s&&U.pointerLock,U.touch&&e?"touch":this.pointerLock?"mouse":U.pointer&&!i?"pointer":U.touch?"touch":"mouse"},preventScrollAxis(n,t,{preventScroll:e}){if(this.preventScrollDelay=typeof e=="number"?e:e||e===void 0&&n?Ge:void 0,!(!U.touchscreen||e===!1))return n||(e!==void 0?"y":void 0)},pointerCapture(n,t,{pointer:{capture:e=!0,buttons:s=1,keys:i=!0}={}}){return this.pointerButtons=s,this.keys=i,!this.pointerLock&&this.device==="pointer"&&e},threshold(n,t,{filterTaps:e=!1,tapsThreshold:s=3,axis:i=void 0}){const r=A.toVector(n,e?s:i?1:0);return this.filterTaps=e,this.tapsThreshold=s,r},swipe({velocity:n=qe,distance:t=Fe,duration:e=Je}={}){return{velocity:this.transform(A.toVector(n)),distance:this.transform(A.toVector(t)),duration:e}},delay(n=0){switch(n){case!0:return ze;case!1:return 0;default:return n}},axisThreshold(n){return n?O(O({},Ut),n):Ut},keyboardDisplacement(n=Ze){return n}});function ee(n){const[t,e]=n.overflow,[s,i]=n._delta,[r,o]=n._direction;(t<0&&s>0&&r<0||t>0&&s<0&&r>0)&&(n._movement[0]=n._movementBound[0]),(e<0&&i>0&&o<0||e>0&&i<0&&o>0)&&(n._movement[1]=n._movementBound[1])}const tn=30,en=100;class nn extends Qt{constructor(...t){super(...t),L(this,"ingKey","pinching"),L(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:e,lastOffset:s}=this.state;t==="wheel"?this.state.offset=A.add(e,s):this.state.offset=[(1+e[0])*s[0],e[1]+s[1]]}computeMovement(){const{offset:t,lastOffset:e}=this.state;this.state.movement=[t[0]/e[0],t[1]-e[1]]}axisIntent(){const t=this.state,[e,s]=t._movement;if(!t.axis){const i=Math.abs(e)*tn-Math.abs(s);i<0?t.axis="angle":i>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const e=this.state,s=this.ctrl.touchIds;if(e._active&&e._touchIds.every(r=>s.has(r))||s.size<2)return;this.start(t),e._touchIds=Array.from(s).slice(0,2);const i=Lt(t,e._touchIds);i&&this.pinchStart(t,i)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const e=this.state,s=e._pointerEvents,i=this.ctrl.pointerIds;if(e._active&&Array.from(s.keys()).every(o=>i.has(o))||(s.size<2&&s.set(t.pointerId,t),e._pointerEvents.size<2))return;this.start(t);const r=dt(...Array.from(s.values()));r&&this.pinchStart(t,r)}pinchStart(t,e){const s=this.state;s.origin=e.origin,this.computeValues([e.distance,e.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const e=Lt(t,this.state._touchIds);e&&this.pinchMove(t,e)}pointerMove(t){const e=this.state._pointerEvents;if(e.has(t.pointerId)&&e.set(t.pointerId,t),!this.state._active)return;const s=dt(...Array.from(e.values()));s&&this.pinchMove(t,s)}pinchMove(t,e){const s=this.state,i=s._values[1],r=e.angle-i;let o=0;Math.abs(r)>270&&(o+=Math.sign(r)),this.computeValues([e.distance,e.angle-360*o]),s.origin=e.origin,s.turns=o,s._movement=[s._values[0]/s._initial[0]-1,s._values[1]-s._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(e=>!this.ctrl.touchIds.has(e))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const e=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}e._pointerEvents.has(t.pointerId)&&e._pointerEvents.delete(t.pointerId),e._active&&e._pointerEvents.size<2&&(e._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const e=this.state;e._active||(this.start(t),this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const e=this.state;this.computeValues([t.scale,t.rotation]),e.origin=[t.clientX,t.clientY];const s=e._movement;e._movement=[t.scale-1,t.rotation],e._delta=A.sub(e._movement,s),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const e=this.config.modifierKey;e&&!t[e]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const s=this.state;s._delta=[-Zt(t)[1]/en*s.offset[0],0],A.addTo(s._movement,s._delta),ee(s),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const e=this.config.device;e&&(t(e,"start",this[e+"Start"].bind(this)),t(e,"change",this[e+"Move"].bind(this)),t(e,"end",this[e+"End"].bind(this)),t(e,"cancel",this[e+"End"].bind(this)),t("lostPointerCapture","",this[e+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const sn=O(O({},te),{},{device(n,t,{shared:e,pointer:{touch:s=!1}={}}){if(e.target&&!U.touch&&U.gesture)return"gesture";if(U.touch&&s)return"touch";if(U.touchscreen){if(U.pointer)return"pointer";if(U.touch)return"touch"}},bounds(n,t,{scaleBounds:e={},angleBounds:s={}}){const i=o=>{const l=Kt(at(e,o),{min:-1/0,max:1/0});return[l.min,l.max]},r=o=>{const l=Kt(at(s,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof e!="function"&&typeof s!="function"?[i(),r()]:o=>[i(o),r(o)]},threshold(n,t,e){return this.lockDirection=e.axis==="lock",A.toVector(n,this.lockDirection?[.1,3]:0)},modifierKey(n){return n===void 0?"ctrlKey":n},pinchOnWheel(n=!0){return n}});class rn extends nt{constructor(...t){super(...t),L(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(tt(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const e=tt(t),s=this.state;s._delta=A.sub(e,s._values),A.addTo(s._movement,s._delta),this.computeValues(e),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const on=O(O({},z),{},{mouseOnly:(n=!0)=>n});class an extends nt{constructor(...t){super(...t),L(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const e=this.state,s=Oe(t);e._delta=A.sub(s,e._values),A.addTo(e._movement,e._delta),this.computeValues(s),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const cn=z;class un extends nt{constructor(...t){super(...t),L(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const e=this.state;e._delta=Zt(t),A.addTo(e._movement,e._delta),ee(e),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const ln=z;class fn extends nt{constructor(...t){super(...t),L(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(tt(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const e=this.state;if(!e._active)return;e._active=!1;const s=tt(t);e._movement=e._delta=A.sub(s,e._values),this.computeValues(s),this.compute(t),e.delta=e.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const hn=O(O({},z),{},{mouseOnly:(n=!0)=>n}),gt=new Map,mt=new Map;function dn(n){gt.set(n.key,n.engine),mt.set(n.key,n.resolver)}const mn={key:"drag",engine:je,resolver:Qe},pn={key:"hover",engine:fn,resolver:hn},gn={key:"move",engine:rn,resolver:on},yn={key:"pinch",engine:nn,resolver:sn},vn={key:"scroll",engine:an,resolver:cn},_n={key:"wheel",engine:un,resolver:ln};function bn(n,t){if(n==null)return{};var e={},s=Object.keys(n),i,r;for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&(e[i]=n[i]);return e}function xn(n,t){if(n==null)return{};var e=bn(n,t),s,i;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(n,s)&&(e[s]=n[s])}return e}const Mn={target(n){if(n)return()=>"current"in n?n.current:n},enabled(n=!0){return n},window(n=U.isBrowser?window:void 0){return n},eventOptions({passive:n=!0,capture:t=!1}={}){return{passive:n,capture:t}},transform(n){return n}},wn=["target","eventOptions","window","enabled","transform"];function ot(n={},t){const e={};for(const[s,i]of Object.entries(t))switch(typeof i){case"function":e[s]=i.call(e,n[s],s,n);break;case"object":e[s]=ot(n[s],i);break;case"boolean":i&&(e[s]=n[s]);break}return e}function En(n,t,e={}){const s=n,{target:i,eventOptions:r,window:o,enabled:l,transform:f}=s,h=xn(s,wn);if(e.shared=ot({target:i,eventOptions:r,window:o,enabled:l,transform:f},Mn),t){const u=mt.get(t);e[t]=ot(O({shared:e.shared},h),u)}else for(const u in h){const m=mt.get(u);m&&(e[u]=ot(O({shared:e.shared},h[u]),m))}return e}class ne{constructor(t,e){L(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=e}add(t,e,s,i,r){const o=this._listeners,l=Ie(e,s),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},h=O(O({},f),r);t.addEventListener(l,i,h);const u=()=>{t.removeEventListener(l,i,h),o.delete(u)};return o.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class Tn{constructor(){L(this,"_timeouts",new Map)}add(t,e,s=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(e,s,...i))}remove(t){const e=this._timeouts.get(t);e&&window.clearTimeout(e)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Sn{constructor(t){L(this,"gestures",new Set),L(this,"_targetEventStore",new ne(this)),L(this,"gestureEventStores",{}),L(this,"gestureTimeoutStores",{}),L(this,"handlers",{}),L(this,"config",{}),L(this,"pointerIds",new Set),L(this,"touchIds",new Set),L(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),kn(this,t)}setEventIds(t){if(ut(t))return this.touchIds=new Set(Pe(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,e){this.handlers=t,this.nativeHandlers=e}applyConfig(t,e){this.config=En(t,e,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const e=this.config.shared,s={};let i;if(!(e.target&&(i=e.target(),!i))){if(e.enabled){for(const o of this.gestures){const l=this.config[o],f=Bt(s,l.eventOptions,!!i);if(l.enabled){const h=gt.get(o);new h(this,t,o).bind(f)}}const r=Bt(s,e.eventOptions,!!i);for(const o in this.nativeHandlers)r(o,"",l=>this.nativeHandlers[o](O(O({},this.state.shared),{},{event:l,args:t})),void 0,!0)}for(const r in s)s[r]=$e(...s[r]);if(!i)return s;for(const r in s){const{device:o,capture:l,passive:f}=Ce(r);this._targetEventStore.add(i,o,"",s[r],{capture:l,passive:f})}}}}function J(n,t){n.gestures.add(t),n.gestureEventStores[t]=new ne(n,t),n.gestureTimeoutStores[t]=new Tn}function kn(n,t){t.drag&&J(n,"drag"),t.wheel&&J(n,"wheel"),t.scroll&&J(n,"scroll"),t.move&&J(n,"move"),t.pinch&&J(n,"pinch"),t.hover&&J(n,"hover")}const Bt=(n,t,e)=>(s,i,r,o={},l=!1)=>{var f,h;const u=(f=o.capture)!==null&&f!==void 0?f:t.capture,m=(h=o.passive)!==null&&h!==void 0?h:t.passive;let g=l?s:Se(s,i,u);e&&m&&(g+="Passive"),n[g]=n[g]||[],n[g].push(r)},Cn=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function In(n){const t={},e={},s=new Set;for(let i in n)Cn.test(i)?(s.add(RegExp.lastMatch),e[i]=n[i]):t[i]=n[i];return[e,t,s]}function Z(n,t,e,s,i,r){if(!n.has(e)||!gt.has(s))return;const o=e+"Start",l=e+"End",f=h=>{let u;return h.first&&o in t&&t[o](h),e in t&&(u=t[e](h)),h.last&&l in t&&t[l](h),u};i[s]=f,r[s]=r[s]||{}}function Dn(n,t){const[e,s,i]=In(n),r={};return Z(i,e,"onDrag","drag",r,t),Z(i,e,"onWheel","wheel",r,t),Z(i,e,"onScroll","scroll",r,t),Z(i,e,"onPinch","pinch",r,t),Z(i,e,"onMove","move",r,t),Z(i,e,"onHover","hover",r,t),{handlers:r,config:t,nativeHandlers:s}}function An(n,t={},e,s){const i=ft.useMemo(()=>new Sn(n),[]);if(i.applyHandlers(n,s),i.applyConfig(t,e),ft.useEffect(i.effect.bind(i)),ft.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function Pn(n){return n.forEach(dn),function(e,s){const{handlers:i,nativeHandlers:r,config:o}=Dn(e,s||{});return An(i,o,void 0,r)}}function On(n,t){return Pn([mn,yn,vn,_n,gn,pn])(n,t||{})}var yt=x.createContext(null);yt.displayName="CoordinateContext";function Rn(){const n=x.useContext(yt);return X(n),n}var Ln=yt;function rt(n,t=0){const e=Math.pow(10,t||0);return Math.round(n*e)/e}function et(n,t,e=1){const s=[];for(let r=n;r<t-e/2;r+=e)s.push(r);const i=s[s.length-1]+e;return Math.abs(t-i)<e/1e-6?s.push(t):s.push(i),s}function se(n,t,e){return Math.min(Math.max(n,t),e)}var{round:Xt,ceil:Ht,floor:Wt,log2:Gt}=Math,vt=x.createContext({xPanes:[],yPanes:[],xPaneRange:[0,0],yPaneRange:[0,0]});vt.displayName="PaneContext";function H(){return x.useContext(vt)}function ie({children:n}){const{xMin:t,xMax:e,yMin:s,yMax:i}=Rn(),r=2**Xt(Gt(e-t)-1),o=2**Xt(Gt(i-s)-1),l=1/8,f=r*Wt(t/r-l),h=r*Ht(e/r+l),u=o*Wt(s/o-l),m=o*Ht(i/o+l),g=x.useMemo(()=>et(f,h-r,r).map(d=>[d,d+r]),[f,h,r]),M=x.useMemo(()=>et(u,m-o,o).map(d=>[d,d+o]),[u,m,o]),_=x.useMemo(()=>({xPanes:g,yPanes:M,xPaneRange:[f,h],yPaneRange:[u,m]}),[g,M,f,h,u,m]);return b(vt.Provider,{value:_,children:n})}ie.displayName="PaneManager";var $n=ie,v;(n=>{function t(a,c){return[a[0]+c[0],a[1]+c[1]]}n.add=t;function e(a,c){return[a[0]-c[0],a[1]-c[1]]}n.sub=e;function s(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}n.mag=s;function i(a){return[-a[1],a[0]]}n.normal=i;function r(a,c,p){const k=e(c,a),w=s(k);return t(a,o(k,p*w))}n.lerp=r;function o(a,c){const p=s(a);return f(a,c/p)}n.withMag=o;function l(a){return o(a,1)}n.normalize=l;function f(a,c){return[a[0]*c,a[1]*c]}n.scale=f;function h(a,c){return[a[0]*c[0]+a[1]*c[1]+c[2],a[0]*c[3]+a[1]*c[4]+c[5]]}n.transform=h;function u(a,c){return G(a[0]*c[0]+a[1]*c[3],a[3]*c[0]+a[4]*c[3],a[0]*c[1]+a[1]*c[4],a[3]*c[1]+a[4]*c[4],a[0]*c[2]+a[1]*c[5]+a[2],a[3]*c[2]+a[4]*c[5]+a[5])}n.matrixMult=u;function m(a,c){const p=Math.cos(c),k=Math.sin(c);return[a[0]*p-a[1]*k,a[0]*k+a[1]*p]}n.rotate=m;function g(a,c,p){const k=e(a,c);return t(c,m(k,p))}n.rotateAbout=g;function M(a,c){return r(a,c,.5)}n.midpoint=M;function _(a,c){return Math.sqrt(d(a,c))}n.dist=_;function d(a,c){return Math.pow(c[0]-a[0],2)+Math.pow(c[1]-a[1],2)}n.squareDist=d;function y(a,c){return a[0]*c[0]+a[1]*c[1]}n.dot=y;function E(a){return a[0]*a[4]-a[3]*a[1]}n.det=E;function S(a){const c=E(a);if(!c)return null;const p=1/c,k=a[0],w=a[1],I=a[2],$=a[3],V=a[4],K=a[5];return G(p*V,p*-$,p*-w,p*k,p*(K*w-I*V),p*(-K*k+I*$))}n.matrixInvert=S;function C(a=null){const c=a||G();return{mult:p=>C(u(p,c)),translate:(p,k)=>C(u(G(1,0,0,1,p,k),c)),rotate:p=>{const k=Math.cos(p),w=Math.sin(p);return C(u(G(k,w,-w,k),c))},scale:(p,k)=>C(u(G(p,0,0,k),c)),shear:(p,k)=>C(u(G(1,k,p,1),c)),get:()=>[...c]}}n.matrixBuilder=C;function T(a){const[c,p,k,w,I,$]=a;return`matrix(${c}, ${w}, ${p}, ${I}, ${k}, ${$})`}n.toCSS=T,n.identity=C().get()})(v||(v={}));function G(n=1,t=0,e=0,s=1,i=0,r=0){return[n,e,i,t,s,r]}var _t=x.createContext(null);_t.displayName="TransformContext";function q(){const n=x.useContext(_t);return X(n),n}var re=x.createContext({xSpan:0,ySpan:0});re.displayName="SpanContext";function Nn({minZoom:n,maxZoom:t}){const[e,s]=x.useState(v.identity),i=x.useRef(v.identity);return{matrix:e,setBase(){i.current=e},move({zoom:r,pan:o}){const l=1/((r==null?void 0:r.scale)??1),f=(r==null?void 0:r.at)??[0,0],h=i.current[0],u=1/t/h,m=1/n/h,g=se(l,u,m),M=v.matrixBuilder(i.current).translate(...v.scale(f,-1)).scale(g,g).translate(...v.scale(f,1)).translate(...o??[0,0]).get();s(M)}}}function Kn(n){const[t,e]=x.useState(!1),s=x.useRef(0);return x.useEffect(()=>{if(!n)return;function i(){e(!1),clearTimeout(s.current),s.current=setTimeout(()=>{e(!0)},500)}return window.addEventListener("scroll",i),()=>window.removeEventListener("scroll",i)},[n]),{wheelEnabled:n?t:!1,handleMouseMove(){e(!0)}}}var oe=x.createContext({overrideHeight:void 0});oe.Provider;function Vn({width:n="auto",height:t=500,pan:e=!0,zoom:s=!1,viewBox:i={x:[-3,3],y:[-3,3]},preserveAspectRatio:r="contain",children:o,ssr:l=!1,onClick:f=void 0}){var Tt,St,kt,Ct;const u=x.useContext(oe).overrideHeight??t,[m,g]=x.useState(!!l),M=n==="auto"?"100%":`${n}px`,_=x.useRef(null),{width:d=l?500:1}=_e({ref:_});x.useEffect(()=>{g(!0)},[]);let y=1,E=1;typeof s=="object"?(X(s.min>0&&s.min<=1),X(s.max>=1),y=s.min,E=s.max):s&&(y=.5,E=5);const S=Nn({minZoom:y,maxZoom:E}),C=(i==null?void 0:i.padding)??.5;let T=(((Tt=i==null?void 0:i.x)==null?void 0:Tt[0])??0)-C,a=(((St=i==null?void 0:i.x)==null?void 0:St[1])??0)+C,c=(((kt=i==null?void 0:i.y)==null?void 0:kt[0])??0)-C,p=(((Ct=i==null?void 0:i.y)==null?void 0:Ct[1])??0)+C;if(r==="contain"){const D=d/u;if((a-T)/(p-c)>D){const P=(p+c)/2,Y=(a-T)/D/2;c=P-Y,p=P+Y}else{const P=(a+T)/2,Y=(p-c)*D/2;T=P-Y,a=P+Y}}[T,c]=v.transform([T,c],S.matrix),[a,p]=v.transform([a,p],S.matrix);const k=a-T,w=p-c,I=x.useMemo(()=>{const D=rt(1/k*d,5),N=rt(-1/w*u,5);return v.matrixBuilder().scale(D,N).get()},[u,d,k,w]),$=rt(T/(a-T)*d,10),V=rt(p/(c-p)*u,10),K=v.matrixInvert(I),R=x.useRef([0,0]),F=x.useRef([0,0]);function wt(D){const N=_.current;X(N),X(K);const P=N.getBoundingClientRect();return v.transform([D[0]-P.left+$,D[1]-P.top+V],K)}const Et=Kn(!!s),lt=x.useRef(!1);On({onDrag:({movement:D,first:N,event:P,type:Y,pinching:B,memo:W=[0,0],last:me})=>{if(B)return D;N&&S.setBase();const[pe,ge]=v.sub(D,W);S.move({pan:[-pe/d*k,ge/u*w]});const It=Y.includes("key");return It&&(P==null||P.preventDefault()),me&&(lt.current=!0,setTimeout(()=>lt.current=!1,10)),!It&&N?D:W},onPinch:({first:D,movement:[N],origin:P,event:Y,last:B})=>{if(!Y.currentTarget||!K)return;D&&(S.setBase(),R.current=P,F.current=e?wt(P):[(T+a)/2,(c+p)/2]);let W=[0,0];e&&(W=v.transform(v.sub(P,R.current),K)),S.move({zoom:{at:F.current,scale:N},pan:v.scale(W,-1)}),B&&S.setBase()},onWheel:({pinching:D,event:N,delta:[,P]})=>{if(D)return;const Y=2/(1+Math.exp(-P/300)),B=wt([N.clientX,N.clientY]);S.setBase(),S.move({zoom:{at:B,scale:1/Y}})},onKeyDown:({event:D})=>{if(D.metaKey)return;const N={Equal:1,Minus:-1}[D.code]??0;if(!N)return;let P=.1;(D.altKey||D.metaKey)&&(P=.01),D.shiftKey&&(P=.3);const Y=1+N*P,B=[(a+T)/2,(p+c)/2];S.setBase(),S.move({zoom:{at:B,scale:Y}})},onMouseMove:()=>{Et.handleMouseMove()},onClick:({event:D})=>{if(!f||!_.current||lt.current)return;const N=_.current.getBoundingClientRect(),P=D.clientX-N.left,Y=N.bottom-D.clientY,B=P/d*k+T,W=Y/u*w+c;f([B,W],D)}},{drag:{enabled:e,eventOptions:{passive:!1},threshold:1},pinch:{enabled:!!s,eventOptions:{passive:!1}},wheel:{enabled:Et.wheelEnabled,preventDefault:!0,eventOptions:{passive:!1}},target:_});const he=v.toCSS(I),de=x.useMemo(()=>({xMin:T,xMax:a,yMin:c,yMax:p,height:u,width:d}),[T,a,c,p,u,d]);return b("div",{className:"MafsView",style:{width:M},tabIndex:e||s?0:-1,ref:_,children:b(Ln.Provider,{value:de,children:b(re.Provider,{value:{xSpan:k,ySpan:w},children:b(_t.Provider,{value:{userTransform:v.identity,viewTransform:I},children:b($n,{children:b("svg",{width:d,height:u,viewBox:`${$} ${V} ${d} ${u}`,preserveAspectRatio:"xMidYMin",style:{width:M,touchAction:e?"none":"auto","--mafs-view-transform":he,"--mafs-user-transform":"translate(0, 0)"},children:m&&o})})})})})})}Vn.displayName="Mafs";var pt=n=>j(Q,{children:[n,n<0&&b("tspan",{visibility:"hidden",children:"-"})]}),ct={axis:!0,lines:1,labels:pt};function bt({separation:n,labelMaker:t}){const{viewTransform:e}=q(),{xPanes:s}=H();return b("g",{className:"mafs-axis",children:s.map(([i,r])=>b("g",{children:ce(i,r,n).filter(o=>Math.abs(o)>n/1e6).map(o=>b("text",{x:v.transform([o,0],e)[0],y:5,dominantBaseline:"hanging",textAnchor:"middle",style:{fill:"var(--mafs-origin-color)",paintOrder:"stroke"},children:t(o)},o))},`${i},${r}`))})}bt.displayName="CartesianCoordinates.XLabels";function xt({separation:n,labelMaker:t}){const{viewTransform:e}=q(),{yPanes:s}=H();return b("g",{className:"mafs-axis",children:s.map(([i,r])=>b("g",{children:ce(i,r,n).filter(o=>Math.abs(o)>n/1e6).map(o=>b("text",{x:5,y:v.transform([0,o],e)[1],dominantBaseline:"central",style:{fill:"var(--mafs-origin-color)",paintOrder:"stroke"},children:t(o)},o))},`${i},${r}`))})}xt.displayName="CartesianCoordinates.YLabels";var Yn=0;function ae({xAxis:n,yAxis:t,subdivisions:e=!1}){const s=n!==!1,i=t!==!1,r={subdivisions:e,...ct,...n},o={subdivisions:e,...ct,...t},l=`cartesian-${Yn++}`,{viewTransform:f}=q(),{xPaneRange:h,yPaneRange:u}=H(),[m,g]=h,[M,_]=u,[d,y]=v.transform([m,M],f),[E,S]=v.transform([g,_],f),C=r.lines||1,T=o.lines||1,[a,c]=v.transform([C,-T],f),p=r.subdivisions||1,k=o.subdivisions||1,w=a/p,I=c/k;return j("g",{fill:"none",children:[j("pattern",{x:0,y:0,width:a,height:c,id:l,patternUnits:"userSpaceOnUse",children:[b("pattern",{width:w,height:I,id:`${l}-subdivision`,patternUnits:"userSpaceOnUse",children:j("g",{stroke:"var(--grid-line-subdivision-color)",children:[s!==!1&&p>1&&j(Q,{children:[b("line",{x1:0,y1:0,x2:0,y2:I}),b("line",{x1:w,y1:0,x2:w,y2:I})]}),i!==!1&&k>1&&j(Q,{children:[b("line",{x1:0,y1:0,x2:w,y2:0}),b("line",{x1:0,y1:I,x2:w,y2:I})]})]})}),b("rect",{width:a,height:c,fill:`url(#${l}-subdivision)`}),j("g",{stroke:"var(--mafs-line-color)",children:[i&&r.lines&&j(Q,{children:[b("line",{x1:0,y1:0,x2:a,y2:0}),b("line",{x1:0,y1:c,x2:a,y2:c})]}),s&&o.lines&&j(Q,{children:[b("line",{x1:0,y1:0,x2:0,y2:c}),b("line",{x1:a,y1:0,x2:a,y2:c})]})]})]}),b("rect",{x:d,y:S,width:E-d,height:y-S,fill:`url(#${l})`}),j("g",{stroke:"var(--mafs-origin-color)",children:[s&&r.axis&&b("line",{x1:d,y1:0,x2:E,y2:0}),i&&o.axis&&b("line",{x1:0,y1:y,x2:0,y2:S})]}),j("g",{className:"mafs-shadow",children:[s&&r.labels&&b(bt,{separation:r.lines||1,labelMaker:r.labels}),i&&o.labels&&b(xt,{separation:o.lines||1,labelMaker:o.labels})]})]})}function ce(n,t,e){const s=Math.floor(n/e)*e,i=Math.ceil(t/e)*e;return s===i-e?[s]:et(s,i-e,e)}var jn=et(0,2*Math.PI,Math.PI/12);function ue({xAxis:n,yAxis:t,lines:e=1,subdivisions:s}){const i=n!==!1,r=t!==!1,o={...ct,...n},l={...ct,...t},{viewTransform:f}=q(),{xPaneRange:h,yPaneRange:u}=H(),[m,g]=h,[M,_]=u,d=[v.mag([m,M]),v.mag([m,_]),v.mag([g,M]),v.mag([g,_]),v.mag([(m+g)/2,(M+_)/2])],y=e,S=Math.min(...d)<Math.max(g-m,_-M)?0:Math.min(...d),C=Math.max(...d),T=Math.floor(S/y)*y,a=Math.ceil(C/y)*y,[c,p]=v.transform([m,M],f),[k,w]=v.transform([g,_],f),[I,$]=v.transform([1,-1],f),V=et(T,a,y),K=s!=null?et(T,a,y/s):[];return j("g",{fill:"none",children:[b("g",{stroke:"var(--grid-line-subdivision-color)",children:jn.map(R=>b("line",{x1:0,y1:0,x2:Math.cos(R)*a*I,y2:-Math.sin(R)*a*$},R))}),K.map(R=>b("ellipse",{"data-r":R,cx:0,cy:0,rx:R*I,ry:R*$,stroke:"var(--grid-line-subdivision-color)"},R)),V.map(R=>b("ellipse",{"data-r":R,cx:0,cy:0,rx:R*I,ry:R*$,stroke:"var(--mafs-line-color)"},R)),j("g",{stroke:"var(--mafs-origin-color)",children:[i&&o.axis&&b("line",{x1:c,y1:0,x2:k,y2:0}),r&&l.axis&&b("line",{x1:0,y1:p,x2:0,y2:w})]}),j("g",{className:"mafs-shadow",children:[i&&o.labels&&b(bt,{separation:(n==null?void 0:n.lines)||e||1,labelMaker:o.labels||pt}),r&&l.labels&&b(xt,{separation:(t==null?void 0:t.lines)||e||1,labelMaker:l.labels||pt})]})]})}ue.displayName="Coordinates.Polar";ae.displayName="Coordinates.Cartesian";var Zn={Cartesian:ae,Polar:ue};function le({domain:n,minDepth:t,maxDepth:e,threshold:s,fn:i,error:r,onPoint:o,midpoint:l}){const[f,h]=n;function u(m,g,M,_,d,y,E){const C=m+(g-m)*.5,T=i(C);if(d<t){u(m,C,!0,!1,d+1,y,T),u(C,g,!1,!0,d+1,T,E);return}if(d<e){const a=l(y,E);if(r(T,a)>s){u(m,C,!0,!1,d+1,y,T),u(C,g,!1,!0,d+1,T,E);return}}M&&o(m,y),o(C,T),_&&o(g,E)}u(f,h,!0,!0,0,i(f),i(h))}function Un(n,t,e,s,i){let r="M ";return le({fn:n,error:(o,l)=>v.squareDist(o,l),onPoint:(o,[l,f])=>{Number.isFinite(l)&&Number.isFinite(f)&&(r+=`${l} ${f} L `)},midpoint:(o,l)=>v.midpoint(o,l),domain:t,minDepth:e,maxDepth:s,threshold:i}),r.substring(0,r.length-2)}function Bn(n,t,e,s,i,r,o){const l={fill:"",upper:"",lower:""};let f="",h="",u=!1,m=0,g=0,M=0;function _(d,y){return n==="x"?`${d} ${y}`:`${y} ${d}`}return le({domain:s,minDepth:i,maxDepth:r,threshold:o,fn:d=>[[d,e(d)],[d,t(d)]],error:([d,y],[E,S])=>Math.max(v.squareDist(d,E),v.squareDist(y,S)),midpoint:([d,y],[E,S])=>[v.midpoint(d,E),v.midpoint(y,S)],onPoint:(d,[[,y],[,E]])=>{const S=E<y&&!u,C=E>y&&u;if(S){if(u=!0,f&&h){const T=(m+d)/2,a=(g+E)/2,c=(M+y)/2,p=(a+c)/2;f+=` ${_(T,p)} L `,h=` ${_(T,p)} L `+h,l.fill+=` M ${f} ${h.substring(0,h.length-2)} z `,l.upper+=` M ${f.substring(0,f.length-2)} `,l.lower+=` M ${h.substring(0,h.length-2)} `,f="",h=""}}else if(C){u=!1;const T=(m+d)/2,a=(g+E)/2,c=(M+y)/2,p=(a+c)/2;f+=` ${_(T,p)} L `,h=` ${_(T,p)} L `+h}u||(Number.isFinite(E)&&(f=f+` ${_(d,E)} L `),Number.isFinite(y)&&(h=` ${_(d,y)} L `+h)),m=d,g=E,M=y}}),f&&h&&(l.fill+=` M ${f} ${h.substring(0,h.length-2)} z `,l.lower+=` M ${h.substring(0,h.length-2)} `,l.upper+=` M ${f.substring(0,f.length-2)} `),l}function Mt({xy:n,t,color:e,style:s="solid",weight:i=2,opacity:r=1,maxSamplingDepth:o=14,minSamplingDepth:l=8,svgPathProps:f={}}){const{viewTransform:h}=q(),u=-v.det(h),[m,g]=t,M=.1/u,_=x.useMemo(()=>Un(n,[m,g],l,o,M),[n,l,o,M,m,g]);return b("path",{d:_,strokeWidth:i,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:s==="dashed"?"1,10":void 0,...f,style:{stroke:e||"var(--mafs-fg)",strokeOpacity:r,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)",...f.style||{}}})}function Xn({y:n,...t}){const{xPaneRange:[e,s]}=H(),i=x.useCallback(o=>[o,n(o)],[n]),r=x.useMemo(()=>[e,s],[e,s]);return b(Mt,{xy:i,t:r,...t})}function Hn({x:n,...t}){const{yPaneRange:[e,s]}=H(),i=x.useCallback(o=>[n(o),o],[n]),r=x.useMemo(()=>[e,s],[e,s]);return b(Mt,{xy:i,t:r,...t})}var fe={foreground:"var(--mafs-fg)",background:"var(--mafs-bg)",red:"var(--mafs-red)",orange:"var(--mafs-orange)",green:"var(--mafs-green)",blue:"var(--mafs-blue)",indigo:"var(--mafs-indigo)",violet:"var(--mafs-violet)",pink:"var(--mafs-pink)",yellow:"var(--mafs-yellow)"},zt=()=>1;function Wn({xy:n,step:t=1,xyOpacity:e=zt,opacityStep:s=e===zt?1:.2,color:i=fe.foreground}){const{viewTransform:r}=q(),{xPanes:o,yPanes:l}=H();s=Math.min(1,Math.max(.01,s));const f=Math.ceil(1/s),h=Gn(f);function u(m,g,M,_){for(let d=Math.floor(m);d<=Math.ceil(g);d+=t)for(let y=Math.floor(M);y<=Math.ceil(_);y+=t){const E=[d,y],S=n([d,y]),C=v.mag(S),T=v.scale(v.normalize(S),Math.min(C,t*.75)),a=v.add(E,T),c=v.transform(E,r),p=v.transform(T,r),k=v.mag(p),w=v.transform(a,r),I=v.scale(v.normalize(p),Math.min(k,5)),$=v.add(w,v.rotate(I,5/6*Math.PI)),V=v.add(w,v.rotate(I,-(5/6)*Math.PI)),K=e([d,y]),R=zn(h,K);R.d+=` M ${c[0]} ${c[1]} L ${w[0]} ${w[1]}  L ${$[0]} ${$[1]}  L ${V[0]} ${V[1]}  L ${w[0]} ${w[1]} `}}for(const[m,g]of o)for(const[M,_]of l)u(m,g,M,_);return b(Q,{children:h.map((m,g)=>b("path",{d:m.d,style:{stroke:i,fill:i,opacity:m.opacity,fillOpacity:m.opacity,strokeOpacity:m.opacity},strokeLinecap:"round",strokeLinejoin:"round"},g))})}function Gn(n){const t=[],e=1/n;for(let s=1;s>0;s-=e){const i={d:"",opacity:s};t.push(i)}return t}function zn(n,t){t=se(t,0,1);const e=n.length-1-Math.round(t*(n.length-1));return n[e]}function qn({x:n,y:t,color:e=fe.foreground,weight:s=2,strokeColor:i=e,strokeOpacity:r=1,fillColor:o=e,fillOpacity:l=.15,minSamplingDepth:f=10,maxSamplingDepth:h=14,upperColor:u=i,upperOpacity:m=r,upperWeight:g=s,lowerColor:M=i,lowerOpacity:_=r,lowerWeight:d=s,svgUpperPathProps:y={},svgLowerPathProps:E={},svgFillPathProps:S={}}){const{xPaneRange:[C,T],yPaneRange:[a,c]}=H(),p=t?[C,T]:[a,c],k=t?[a,c]:[C,T],w=t||n;X(w&&n===void 0!=(t===void 0)),X((w["<"]===void 0||w["<="]===void 0)&&(w[">"]===void 0||w[">="]===void 0));let I=0;"<="in w&&(I=1),"<"in w&&(I=2);let $=0;">="in w&&($=1),">"in w&&($=2);let V=w["<"]??w["<="]??(()=>k[1]),K=w[">"]??w[">="]??(()=>k[0]);if(typeof V=="number"){const F=V;V=()=>F}if(typeof K=="number"){const F=K;K=()=>F}const R=Bn(t?"x":"y",V,K,p,f,h,.1);return j("g",{children:[b("path",{d:R.fill,style:{fill:o||"var(--mafs-fg)",fillOpacity:l,stroke:"none",transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",...S==null?void 0:S.style},...S}),I!=0&&b("path",{d:R.upper,strokeWidth:g,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:I===2?"4,8":"",style:{fill:"none",stroke:u,strokeOpacity:m,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",...y==null?void 0:y.style},...y}),$!=0&&b("path",{d:R.lower,strokeWidth:d,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:$===2?"4,8":"",style:{fill:"none",stroke:M,strokeOpacity:_,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke",...E==null?void 0:E.style},...E})]})}var it={OfX:Xn,OfY:Hn,Parametric:Mt,VectorField:Wn,Inequality:qn};it.OfX.displayName="Plot.OfX";it.OfY.displayName="Plot.OfY";it.Parametric.displayName="Plot.Parametric";it.VectorField.displayName="Plot.VectorField";it.Inequality.displayName="Plot.Inequality";function Fn({children:n,x:t,y:e,color:s,size:i=30,svgTextProps:r={},attach:o,attachDistance:l=0}){const{viewTransform:f,userTransform:h}=q();let u=0,m="middle";o!=null&&o.includes("w")?(m="end",u=-1):o!=null&&o.includes("e")&&(m="start",u=1);let g=0,M="middle";o!=null&&o.includes("n")?(M="baseline",g=1):o!=null&&o.includes("s")&&(M="hanging",g=-1);let[_,d]=[0,0];(u!==0||g!==0)&&([_,d]=v.withMag([u,g],l));const y=v.transform([t,e],v.matrixMult(f,h));return b("text",{x:y[0]+_,y:y[1]+d,fontSize:i,dominantBaseline:M,textAnchor:m,style:{fill:s||"var(--mafs-fg)",vectorEffect:"non-scaling-stroke"},className:"mafs-shadow",...r,children:n})}Fn.displayName="Text";export{Zn as C,Vn as M,it as P,fe as T,Fn as a};
