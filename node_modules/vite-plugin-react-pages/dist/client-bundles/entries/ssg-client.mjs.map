{"version":3,"file":"ssg-client.mjs","sources":["../../../src/client/entries/ssg-client.tsx"],"sourcesContent":["/**\n * This is the entry for static-site-generation(ssg)'s client side hydration.\n * Used in: \"ssr mode\"\n * (\"ssr\" is used in many places in this project to refer to \"ssg\". Should have called it ssg mode...)\n */\n\nimport React from 'react'\nimport { hydrateRoot } from 'react-dom/client'\n\nimport type { PageLoaded } from '../../../clientTypes'\nimport App from '../App'\nimport ClientAppWrapper from './ClientAppWrapper'\nimport pages from '/@react-pages/pages'\n\ndeclare global {\n  interface Window {\n    _vitePagesSSR: {\n      routePath: string\n    }\n  }\n}\n\nconst routePath = window._vitePagesSSR?.routePath\n\nif (!routePath) {\n  console.error(\n    `[vite-pages]: window._vitePagesSSR?.routePath should be defined`\n  )\n}\n\nconst pageDataImporter = pages[routePath]?.data\nif (pageDataImporter) {\n  // load current page data before hydrate\n  pageDataImporter().then(({ default: pageLoaded }: any) => {\n    const initCache: PageLoaded = {\n      [routePath]: { ...pageLoaded },\n    }\n    hydrate(initCache)\n  })\n} else {\n  // there is no page data for current page\n  hydrate({})\n}\n\nfunction hydrate(initCache: PageLoaded) {\n  const container = document.getElementById('root')!\n  hydrateRoot(\n    container,\n    <ClientAppWrapper initCache={initCache}>\n      <App />\n    </ClientAppWrapper>\n  )\n}\n"],"names":["routePath","window","_vitePagesSSR","console","error","pageDataImporter","pages","data","then","default","pageLoaded","initCache","hydrate","container","document","getElementById","hydrateRoot","_jsx","ClientAppWrapper","children","App"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAkBA,MAAMA,SAAS,GAAGC,MAAM,CAACC,aAAa,EAAEF,SAAS,CAAA;AAEjD,IAAI,CAACA,SAAS,EAAE;AACdG,EAAAA,OAAO,CAACC,KAAK,CACV,CAAA,+DAAA,CAAgE,CAClE,CAAA;AACH,CAAA;AAEA,MAAMC,gBAAgB,GAAGC,YAAK,CAACN,SAAS,CAAC,EAAEO,IAAI,CAAA;AAC/C,IAAIF,gBAAgB,EAAE;AACpB;AACAA,EAAAA,gBAAgB,EAAE,CAACG,IAAI,CAAC,CAAC;AAAEC,IAAAA,OAAO,EAAEC,UAAAA;AAAgB,GAAC,KAAK;AACxD,IAAA,MAAMC,SAAqB,GAAG;AAC5B,MAAA,CAACX,SAAS,GAAG;QAAE,GAAGU,UAAAA;AAAW,OAAA;KAC9B,CAAA;IACDE,OAAO,CAACD,SAAS,CAAC,CAAA;AACpB,GAAC,CAAC,CAAA;AACJ,CAAC,MAAM;AACL;EACAC,OAAO,CAAC,EAAE,CAAC,CAAA;AACb,CAAA;AAEA,SAASA,OAAOA,CAACD,SAAqB,EAAE;AACtC,EAAA,MAAME,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAE,CAAA;AAClDC,EAAAA,WAAW,CACTH,SAAS,eACTI,GAAA,CAACC,gBAAgB,EAAA;AAACP,IAAAA,SAAS,EAAEA,SAAU;IAAAQ,QAAA,eACrCF,GAAA,CAACG,GAAG,EAAA,EAAA,CAAA;AAAG,GAAA,CACU,CACpB,CAAA;AACH"}