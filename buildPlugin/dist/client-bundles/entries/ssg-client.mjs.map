{"version":3,"file":"ssg-client.mjs","sources":["../../../src/client/entries/ssg-client.tsx"],"sourcesContent":["/**\r\n * This is the entry for static-site-generation(ssg)'s client side hydration.\r\n * Used in: \"ssr mode\"\r\n * (\"ssr\" is used in many places in this project to refer to \"ssg\". Should have called it ssg mode...)\r\n */\r\n\r\nimport React from 'react'\r\nimport { hydrateRoot } from 'react-dom/client'\r\n\r\nimport type { PageLoaded } from '../../../clientTypes'\r\nimport App from '../App'\r\nimport ClientAppWrapper from './ClientAppWrapper'\r\nimport pages from '/@react-pages/pages'\r\n\r\ndeclare global {\r\n  interface Window {\r\n    _vitePagesSSR: {\r\n      routePath: string\r\n    }\r\n  }\r\n}\r\n\r\nconst routePath = window._vitePagesSSR?.routePath\r\n\r\nif (!routePath) {\r\n  console.error(\r\n    `[vite-pages]: window._vitePagesSSR?.routePath should be defined`\r\n  )\r\n}\r\n\r\nconst pageDataImporter = pages[routePath]?.data\r\nif (pageDataImporter) {\r\n  // load current page data before hydrate\r\n  pageDataImporter().then(({ default: pageLoaded }: any) => {\r\n    const initCache: PageLoaded = {\r\n      [routePath]: { ...pageLoaded },\r\n    }\r\n    hydrate(initCache)\r\n  })\r\n} else {\r\n  // there is no page data for current page\r\n  hydrate({})\r\n}\r\n\r\nfunction hydrate(initCache: PageLoaded) {\r\n  const container = document.getElementById('root')!\r\n  hydrateRoot(\r\n    container,\r\n    <ClientAppWrapper initCache={initCache}>\r\n      <App />\r\n    </ClientAppWrapper>\r\n  )\r\n}\r\n"],"names":["routePath","window","_vitePagesSSR","console","error","pageDataImporter","pages","data","then","default","pageLoaded","initCache","hydrate","container","document","getElementById","hydrateRoot","_jsx","ClientAppWrapper","children","App"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAkBA,MAAMA,SAAS,GAAGC,MAAM,CAACC,aAAa,EAAEF,SAAS,CAAA;AAEjD,IAAI,CAACA,SAAS,EAAE;AACdG,EAAAA,OAAO,CAACC,KAAK,CACV,CAAA,+DAAA,CACH,CAAC,CAAA;AACH,CAAA;AAEA,MAAMC,gBAAgB,GAAGC,YAAK,CAACN,SAAS,CAAC,EAAEO,IAAI,CAAA;AAC/C,IAAIF,gBAAgB,EAAE;AACpB;AACAA,EAAAA,gBAAgB,EAAE,CAACG,IAAI,CAAC,CAAC;AAAEC,IAAAA,OAAO,EAAEC,UAAAA;AAAgB,GAAC,KAAK;AACxD,IAAA,MAAMC,SAAqB,GAAG;AAC5B,MAAA,CAACX,SAAS,GAAG;QAAE,GAAGU,UAAAA;AAAW,OAAA;KAC9B,CAAA;IACDE,OAAO,CAACD,SAAS,CAAC,CAAA;AACpB,GAAC,CAAC,CAAA;AACJ,CAAC,MAAM;AACL;EACAC,OAAO,CAAC,EAAE,CAAC,CAAA;AACb,CAAA;AAEA,SAASA,OAAOA,CAACD,SAAqB,EAAE;AACtC,EAAA,MAAME,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,MAAM,CAAE,CAAA;AAClDC,EAAAA,WAAW,CACTH,SAAS,eACTI,GAAA,CAACC,gBAAgB,EAAA;AAACP,IAAAA,SAAS,EAAEA,SAAU;AAAAQ,IAAAA,QAAA,eACrCF,GAAA,CAACG,GAAG,EAAE,EAAA,CAAA;AAAC,GACS,CACpB,CAAC,CAAA;AACH"}